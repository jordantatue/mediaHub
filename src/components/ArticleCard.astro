---
interface Props {
  title: string;
  date: Date;
  category: string;
  excerpt: string;
  source: string;
  slug: string;
  image: string;
  imageAlt: string;
}

const { title, date, category, excerpt, source, slug, image, imageAlt } = Astro.props;

// Formate la date pour l'affichage sur la carte d'article.
const FormaterDateCarte = (date: Date) =>
  new Intl.DateTimeFormat('fr-FR', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  }).format(date);

---

<article class="card h-100 border-0 shadow-sm">
  <div class="ratio ratio-16x9 rounded-top overflow-hidden">
    <img
      src={image}
      alt={imageAlt}
      class="w-100 h-100 object-fit-cover"
      loading="lazy"
    />
  </div>

  <div class="card-body d-flex flex-column">
    <div class="d-flex justify-content-between align-items-center mb-2 flex-wrap gap-2">
      <span class="badge text-bg-primary text-uppercase">{category}</span>
      <time class="text-muted small" datetime={date.toISOString()}>
        {FormaterDateCarte(date)}
      </time>
    </div>

    <h2 class="h5 mb-3">
      <a href={`/posts/${slug}`} class="stretched-link text-dark text-decoration-none">
        {title}
      </a>
    </h2>

    <p class="text-muted mb-4">{excerpt}</p>

    <div class="d-flex justify-content-between align-items-center mt-auto pt-3 border-top small">
      <span class="text-muted fw-semibold">{source}</span>
      <span class="text-primary fw-semibold">Lire la suite â†’</span>
    </div>
  </div>
</article>
